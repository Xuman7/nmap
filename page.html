<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nmap Port Scanner</title>
</head>

<body>
    <h1>Nmap Port Scanner</h1>
    <form id="scanForm">
        <input type="text" id="domain" name="domain" placeholder="Enter Domain" required>
        <input type="text" id="ports" name="ports" placeholder="Enter Ports (optional, e.g., 80,443)">
        <button type="submit">Scan</button>
    </form>
    <pre id="scanResult"></pre>

    <script>
        document.getElementById('scanForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            const domain = document.getElementById('domain').value;
            const ports = document.getElementById('ports').value;

            // fetch('/scan', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({ domain, ports })
            // })
            /* fetch('http://localhost:3000/scan', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ domain, ports })
            })

                .then(response => response.json())
                .then(data => {
                    document.getElementById('scanResult').textContent = JSON.stringify(data, null, 2);
                })
                .catch(err => {
                    document.getElementById('scanResult').textContent = `Error: ${err.message}`;
                }); */

            const res = await fetch('http://localhost:3000/scan', {

                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ domain, ports })
            })

            const data = await res.json()

            console.log(data);

        });
    </script>
</body>

</html>